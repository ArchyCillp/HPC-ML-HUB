### 3.1. Compilation with NVCC
- kernels -> PTX (汇编) -> cubin
- JIT编译：PTX在运行时被硬件编译成bin，这也是唯一能让应用在编译时没出现的硬件上跑的方法。
- cubin兼容性：8.2可以在8.6上跑，但是不能在7.x或者9.x或者8.0上跑
- PTX兼容性
- 应用兼容性：
	- - `-ptx`：生成PTX文件。
	- `-cubin`：生成CUBIN文件。
	- `-gencode`：可以同时生成PTX和CUBIN文件，支持多个架构。
	- `-arch`和`-code`：可以用来指定生成PTX和CUBIN文件的架构。
	- `-arch=sm_70`作为缩写，可以直接生成70的PTX和CUBIN

### 3.2 CUDA runtime
- cudart库，`libcudart.a`，`cudart.so`
#### 3.2.1 intialization
- 如果你没有显式调用`cudaSetDevice()`或`cudaInitDevice()`，CUDA运行时会隐式初始化device 0。
- 在测量时间之前，显式调用`cudaSetDevice()`或`cudaInitDevice()`，以确保初始化时间不会被计入后续API调用的时间测量中。
- 在应用程序的早期阶段显式调用`cudaSetDevice()`或`cudaInitDevice()`，并检查返回的错误代码，以确保CUDA运行时的正确初始化。
- primary context
	- `cudaSetDevice()`显式创建
	- 是在第一次调用CUDA runtime函数时隐式创建的
	- host端共享
	- `cudaDeviceReset()`用于销毁当前的primary context
	- 详见CUDA context章节
#### 3.2.2 device memory
